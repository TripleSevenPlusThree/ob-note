## 逻辑存储结构
![[20240218_101437.png]]
## 存储引擎架构
![[20240218_101607.png]]
### 内存架构
![[20240218_101900.png]]
![[20240218_102131.png]]
![[20240218_102402.png]]
![[20240218_102612.png]]
### 磁盘架构
![[20240218_102912.png]]
![[20240218_103250.png]]
#### 通用表空间创建操作
![[20240218_103132.png]]
![[20240218_103450.png]]
## 后台线程
![[20240218_103835.png]]
## 事务原理
![[20240218_104113.png]]
![[20240218_104245.png]]
### redo log 日志文件
![[20240218_104920.png]]
- 保证数据能完整的写入磁盘，相当于备份一份
### undo log 日志文件
![[20240218_105145.png]]
- 记录每一个版本，类似于git
## mvcc概述
### 基本概念
![[20240218_105707.png]]
- 类似与git的版本控制
### 实现原理
#### 隐藏字段
![[20240218_110315 1.png]]
#### 查看ibd文件的数据的命令
- Linux命令--查询出来是以json格式展示
![[20240218_110355.png]]
#### undo log 日志文件
![[20240218_110702.png]]
![[20240218_111226.png]]
#### readview
![[20240218_200151.png]]
![[20240218_200420.png]]
##### 读可提交隔离级别
![[20240218_200726.png]]
![[20240218_201204.png]]
##### 可重复读隔离级别
![[20240218_201347.png]]
- 可重复读中，活动事务中，第一次快照读生成readview，此后的查询语句复用第一次生成的readview，即此后每一次执行查询都是和第一次查询的一样的数据
![[20240218_201450.png]]
## 总结
![[20240218_202038.png]]